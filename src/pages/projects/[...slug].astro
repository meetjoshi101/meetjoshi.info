---
import { getCollection, type CollectionEntry } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';

export async function getStaticPaths() {
    const projects = await getCollection('projects');
    return projects.map((project) => ({
        params: { slug: project.slug },
        props: { project },
    }));
}

interface Props {
    project: CollectionEntry<'projects'>;
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<MainLayout title={project.data.title}>
    <article class="py-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            {project.data.image && (
                <img 
                    src={project.data.image}
                    alt={project.data.title}
                    class="w-full h-80 object-cover rounded-xl mb-8"
                />
            )}
            <h1 class="text-4xl font-bold text-gray-900 mb-4">{project.data.title}</h1>
            <div class="flex flex-wrap gap-2 mb-8">
                {project.data.technologies.map((tech) => (
                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">
                        {tech}
                    </span>
                ))}
            </div>
            <div class="prose prose-lg max-w-none">
                <Content />
            </div>
            <div class="mt-12 flex gap-4">
                {project.data.github && (
                    <a 
                        href={project.data.github}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors"
                    >
                        View on GitHub
                    </a>
                )}
                {project.data.liveUrl && (
                    <a 
                        href={project.data.liveUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                    >
                        View Live Demo
                    </a>
                )}
            </div>
        </div>
    </article>
</MainLayout>